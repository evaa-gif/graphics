cohensutherland
#include <graphics.h>
#include <iostream>
#include<conio.h>
using namespace std;

#define INSIDE 0
#define LEFT   1
#define RIGHT  2
#define BOTTOM 4
#define TOP    8

int xmin = 100, ymin = 100, xmax = 300, ymax = 300;

int computeCode(int x, int y)
{
    int code = INSIDE;

    if (x < xmin)
        code |= LEFT;
    else if (x > xmax)
        code |= RIGHT;

    if (y < ymin)
        code |= BOTTOM;
    else if (y > ymax)
        code |= TOP;

    return code;
}

void cohenSutherland(int x1, int y1, int x2, int y2)
{
    int code1 = computeCode(x1, y1);
    int code2 = computeCode(x2, y2);
    bool accept = false;

    while (true)
    {
        if ((code1 == 0) && (code2 == 0))
        {
            accept = true;
            break;
        }
        else if (code1 & code2)
        {
            break;
        }
        else
        {
            int codeOut, x, y;

            if (code1 != 0)
                codeOut = code1;
            else
                codeOut = code2;

            if (codeOut & TOP)
            {
                x = x1 + (x2 - x1) * (ymax - y1) / (y2 - y1);
                y = ymax;
            }
            else if (codeOut & BOTTOM)
            {
                x = x1 + (x2 - x1) * (ymin - y1) / (y2 - y1);
                y = ymin;
            }
            else if (codeOut & RIGHT)
            {
                y = y1 + (y2 - y1) * (xmax - x1) / (x2 - x1);
                x = xmax;
            }
            else if (codeOut & LEFT)
            {
                y = y1 + (y2 - y1) * (xmin - x1) / (x2 - x1);
                x = xmin;
            }

            if (codeOut == code1)
            {
                x1 = x;
                y1 = y;
                code1 = computeCode(x1, y1);
            }
            else
            {
                x2 = x;
                y2 = y;
                code2 = computeCode(x2, y2);
            }
        }
    }

    if (accept)
    {
        setcolor(GREEN);
        line(x1, y1, x2, y2);
    }
}

int main()
{
    int gd = DETECT, gm;
    initgraph(&gd, &gm, "C:\\TURBOC3\\BGI");

    setcolor(WHITE);
    rectangle(xmin, ymin, xmax, ymax);

    setcolor(RED);
    line(50, 200, 350, 250);

    cohenSutherland(50, 200, 350, 250);

    getch();
    closegraph();
    return 0;
}

liang barsky
#include <graphics.h>
#include <iostream>
#include<conio.h>
using namespace std;

int xmin = 100, ymin = 100, xmax = 300, ymax = 300;

void liangBarsky(int x1, int y1, int x2, int y2)
{
    float dx = x2 - x1;
    float dy = y2 - y1;

    float p[4] = { -dx, dx, -dy, dy };
    float q[4] = { x1 - xmin, xmax - x1, y1 - ymin, ymax - y1 };

    float u1 = 0.0, u2 = 1.0;

    for (int i = 0; i < 4; i++)
    {
        if (p[i] == 0)
        {
            if (q[i] < 0)
                return;
        }
        else
        {
            float u = q[i] / p[i];
            if (p[i] < 0)
            {
                if (u > u1) u1 = u;
            }
            else
            {
                if (u < u2) u2 = u;
            }
        }
    }

    if (u1 > u2)
        return;

    int nx1 = x1 + u1 * dx;
    int ny1 = y1 + u1 * dy;
    int nx2 = x1 + u2 * dx;
    int ny2 = y1 + u2 * dy;

    setcolor(GREEN);
    line(nx1, ny1, nx2, ny2);
}

int main()
{
    int gd = DETECT, gm;
    initgraph(&gd, &gm, "C:\\TURBOC3\\BGI");

    setcolor(WHITE);
    rectangle(xmin, ymin, xmax, ymax);

    setcolor(RED);
    line(50, 200, 350, 250);

    liangBarsky(50, 200, 350, 250);

    getch();
    closegraph();
    return 0;
}













